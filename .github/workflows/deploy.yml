name: Back-end CD

on:
  workflow_call:
    inputs:
      environment:
        required: true
        type: string

jobs:  
  deploy:
    name: Deploy ðŸš€
    runs-on: ubuntu-latest
    environment: ${{ inputs.environment }}

    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Setup SSH Keys and known_hosts
      uses: webfactory/ssh-agent@v0.4.1
      with:
        ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}
    - name: Update Docker
      run: ./CI/deploy.sh
      env:
        SSH_PASS: ${{ secrets.SSH_PASS }}
        CONNECTION: ${{ secrets.CONNECTION }}
        REMOTE_PATH: ${{ secrets.REMOTE_PATH }}
